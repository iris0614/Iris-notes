<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>SQL</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./img/favicon_io/favicon.ico" rel="icon">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html" rel="" target="">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./sql.html" rel="" target="" aria-current="page">
 <span class="menu-text">SQL</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools ms-auto">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#relational-databases" id="toc-relational-databases" class="nav-link active" data-scroll-target="#relational-databases">Relational Databases</a>
  <ul class="collapse">
  <li><a href="#introduction" id="toc-introduction" class="nav-link" data-scroll-target="#introduction">Introduction</a>
  <ul class="collapse">
  <li><a href="#using-a-dbms-ensures" id="toc-using-a-dbms-ensures" class="nav-link" data-scroll-target="#using-a-dbms-ensures">Using a DBMS ensures:</a></li>
  </ul></li>
  <li><a href="#relational-data-model" id="toc-relational-data-model" class="nav-link" data-scroll-target="#relational-data-model">Relational Data Model</a></li>
  <li><a href="#relational-database-a-collection-of-relations." id="toc-relational-database-a-collection-of-relations." class="nav-link" data-scroll-target="#relational-database-a-collection-of-relations.">Relational Database: A collection of relations.</a></li>
  <li><a href="#query-language-in-a-dbms" id="toc-query-language-in-a-dbms" class="nav-link" data-scroll-target="#query-language-in-a-dbms">Query language in a DBMS</a></li>
  <li><a href="#postgresql" id="toc-postgresql" class="nav-link" data-scroll-target="#postgresql">PostgreSQL</a>
  <ul class="collapse">
  <li><a href="#psql-postgresqls-interactive-command-line-interface" id="toc-psql-postgresqls-interactive-command-line-interface" class="nav-link" data-scroll-target="#psql-postgresqls-interactive-command-line-interface">psql: PostgreSQL’s interactive command-line interface</a></li>
  </ul></li>
  <li><a href="#sql-commands" id="toc-sql-commands" class="nav-link" data-scroll-target="#sql-commands">SQL commands:</a>
  <ul class="collapse">
  <li><a href="#order-of-executionprocessing-in-sql" id="toc-order-of-executionprocessing-in-sql" class="nav-link" data-scroll-target="#order-of-executionprocessing-in-sql">Order of execution/processing in SQl:</a></li>
  <li><a href="#order-of-sql-clauses-in-a-statement" id="toc-order-of-sql-clauses-in-a-statement" class="nav-link" data-scroll-target="#order-of-sql-clauses-in-a-statement">Order of SQL clauses in a statement:</a></li>
  <li><a href="#order-of-evaluation-for-different-operators" id="toc-order-of-evaluation-for-different-operators" class="nav-link" data-scroll-target="#order-of-evaluation-for-different-operators">Order of evaluation for different operators:</a></li>
  <li><a href="#logical-operators-order" id="toc-logical-operators-order" class="nav-link" data-scroll-target="#logical-operators-order">Logical operators order:</a></li>
  <li><a href="#data-types" id="toc-data-types" class="nav-link" data-scroll-target="#data-types">Data types:</a></li>
  <li><a href="#nulls" id="toc-nulls" class="nav-link" data-scroll-target="#nulls"><strong>Nulls</strong></a></li>
  <li><a href="#where" id="toc-where" class="nav-link" data-scroll-target="#where"><strong>WHERE</strong></a></li>
  <li><a href="#like-and-ilike" id="toc-like-and-ilike" class="nav-link" data-scroll-target="#like-and-ilike"><strong>LIKE</strong> and <strong>ILIKE</strong></a></li>
  <li><a href="#in" id="toc-in" class="nav-link" data-scroll-target="#in"><strong>IN</strong></a></li>
  <li><a href="#between" id="toc-between" class="nav-link" data-scroll-target="#between"><strong>BETWEEN</strong></a></li>
  <li><a href="#is-null" id="toc-is-null" class="nav-link" data-scroll-target="#is-null"><strong>IS NULL</strong></a></li>
  <li><a href="#column-aliases-with-as" id="toc-column-aliases-with-as" class="nav-link" data-scroll-target="#column-aliases-with-as"><strong>Column Aliases with AS</strong></a></li>
  <li><a href="#derived-columns" id="toc-derived-columns" class="nav-link" data-scroll-target="#derived-columns"><strong>Derived columns</strong></a></li>
  <li><a href="#conditionals-with-case" id="toc-conditionals-with-case" class="nav-link" data-scroll-target="#conditionals-with-case"><strong>Conditionals with <code>CASE</code></strong></a></li>
  <li><a href="#functions-operators" id="toc-functions-operators" class="nav-link" data-scroll-target="#functions-operators"><strong>Functions &amp; operators</strong></a></li>
  <li><a href="#nulls-1" id="toc-nulls-1" class="nav-link" data-scroll-target="#nulls-1"><strong>Nulls</strong></a></li>
  </ul></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">SQL</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="relational-databases" class="level1">
<h1>Relational Databases</h1>
<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<ul>
<li>What is a database?
<ul>
<li>Organized collection of related data</li>
</ul></li>
<li>What is a database management system (DBMS)?
<ul>
<li>Collection of programs that enables users to create and maintain a database</li>
<li>allows users to create, query, modify, and manage</li>
</ul></li>
</ul>
<p><strong>DATABASE != DBMS</strong></p>
<section id="using-a-dbms-ensures" class="level3">
<h3 class="anchored" data-anchor-id="using-a-dbms-ensures">Using a DBMS ensures:</h3>
<ul>
<li><strong>Efficiency</strong>: Data is stored efficiently.</li>
<li><strong>Integrity</strong>: Data is consistent and correct.</li>
<li><strong>Security</strong>: Data is safe from unauthorized access.</li>
<li><strong>Concurrent Access</strong>: Multiple users can access the same data at the same time.</li>
<li><strong>Crash Recovery</strong>: Data is safe from crashes.</li>
<li><strong>Independence</strong>: Data is independent of the programs that use it.</li>
</ul>
</section>
</section>
<section id="relational-data-model" class="level2">
<h2 class="anchored" data-anchor-id="relational-data-model">Relational Data Model</h2>
<ul>
<li>Works with entities and relationships</li>
<li><strong>Entity</strong>: a thing or object in the real world that is distinguishable from other objects
<ul>
<li>e.g.&nbsp;students in a school</li>
</ul></li>
<li><strong>Relationship</strong>: an association among entities
<ul>
<li>e.g.&nbsp;a student is enrolled in a course</li>
</ul></li>
</ul>
</section>
<section id="relational-database-a-collection-of-relations." class="level2">
<h2 class="anchored" data-anchor-id="relational-database-a-collection-of-relations.">Relational Database: A collection of relations.</h2>
<ul>
<li>A <strong>relation</strong> is an instance of a relation schema (just like an object was an instance of a class!)</li>
<li><strong>Relation Schema</strong> specifies:
<ol type="1">
<li>Name of a relation</li>
<li>Name and domain of each attribute</li>
</ol></li>
<li><strong>Domain</strong>: A set of constraints that determines the type, length, format, range, uniqueness and nullability of values stored for an attribute.</li>
</ul>
<p><img src="img/1_Anatomy_of_a_table.png" width="400"></p>
</section>
<section id="query-language-in-a-dbms" class="level2">
<h2 class="anchored" data-anchor-id="query-language-in-a-dbms">Query language in a DBMS</h2>
<ul>
<li>Query: A question that we ask about the data. The result of a query is a new relation.</li>
<li><strong>Structured Query Language (SQL)</strong>: A programming language taht we use to talk to a relational DBMS. <strong>SQL != relational model != database != DBMS</strong> SQL is a standard language for storing, manipulating and retrieving data in databases.</li>
<li>The data query language(DQL) is part of a bigger set of languages for working with data in a realational database, which consists of:
<ul>
<li><strong>Data Definition Language (DDL)</strong> for creating, altering and deleting tables.</li>
<li><strong>Data Manipulation Language (DML)</strong> for inserting new data, updating values, etc.</li>
<li><strong>Data Query Language (DQL)</strong> for quering and retrieving data.</li>
<li><strong>Data Control Language (DCL)</strong> for management and controlling user access, rights and privileges.</li>
</ul></li>
</ul>
</section>
<section id="postgresql" class="level2">
<h2 class="anchored" data-anchor-id="postgresql">PostgreSQL</h2>
<ul>
<li>It is an open-source, cross-platform DBMS that implements the relational model.</li>
</ul>
<section id="psql-postgresqls-interactive-command-line-interface" class="level3">
<h3 class="anchored" data-anchor-id="psql-postgresqls-interactive-command-line-interface">psql: PostgreSQL’s interactive command-line interface</h3>
<table class="table">
<thead>
<tr class="header">
<th>Command</th>
<th>Usage</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>\l</code></td>
<td>List all databases</td>
</tr>
<tr class="even">
<td><code>\c</code></td>
<td>Connect to a database</td>
</tr>
<tr class="odd">
<td><code>\d</code></td>
<td>Describe tables and views</td>
</tr>
<tr class="even">
<td><code>\dt</code></td>
<td>List tables</td>
</tr>
<tr class="odd">
<td><code>\dt+</code></td>
<td>List tables with additional info</td>
</tr>
<tr class="even">
<td><code>\d+</code></td>
<td>List tables and views with additional info</td>
</tr>
<tr class="odd">
<td><code>\!</code></td>
<td>Execute shell commands</td>
</tr>
<tr class="even">
<td><code>\cd</code></td>
<td>Change directory</td>
</tr>
<tr class="odd">
<td><code>\i</code></td>
<td>Execute commands from a file</td>
</tr>
<tr class="even">
<td><code>\h</code></td>
<td>View help on SQL commands</td>
</tr>
<tr class="odd">
<td><code>\?</code></td>
<td>View help on psql meta commands</td>
</tr>
<tr class="even">
<td><code>\q</code></td>
<td>Quit interactive shell</td>
</tr>
</tbody>
</table>
<p>Note that you don’t need to terminate meta commands with <code>;</code>.</p>
</section>
</section>
<section id="sql-commands" class="level2">
<h2 class="anchored" data-anchor-id="sql-commands">SQL commands:</h2>
<section id="order-of-executionprocessing-in-sql" class="level3">
<h3 class="anchored" data-anchor-id="order-of-executionprocessing-in-sql">Order of execution/processing in SQl:</h3>
<ul>
<li>FROM and JOIN</li>
<li>WHERE</li>
<li>GROUP BY</li>
<li>HAVING</li>
<li>SELECT</li>
<li>DISTINCT</li>
<li>ORDER BY</li>
<li>LIMIT</li>
</ul>
</section>
<section id="order-of-sql-clauses-in-a-statement" class="level3">
<h3 class="anchored" data-anchor-id="order-of-sql-clauses-in-a-statement">Order of SQL clauses in a statement:</h3>
<ul>
<li>SELECT</li>
<li>FROM</li>
<li>JOIN</li>
<li>WHERE</li>
<li>GROUP BY</li>
<li>HAVING</li>
<li>ORDER BY</li>
<li>LIMIT</li>
</ul>
</section>
<section id="order-of-evaluation-for-different-operators" class="level3">
<h3 class="anchored" data-anchor-id="order-of-evaluation-for-different-operators">Order of evaluation for different operators:</h3>
<ul>
<li>arithmetic oprators(e.g.&nbsp;<code>+</code>, <code>*</code>)</li>
<li>comparison operators(e.g.&nbsp;<code>&gt;</code>, <code>&lt;=</code>)</li>
<li>logical operators(e.g.&nbsp;<code>NOT</code>, <code>AND</code>, <code>OR</code>)</li>
</ul>
</section>
<section id="logical-operators-order" class="level3">
<h3 class="anchored" data-anchor-id="logical-operators-order">Logical operators order:</h3>
<ul>
<li><code>NOT</code></li>
<li><code>AND</code></li>
<li><code>OR</code></li>
</ul>
<p><em>In SQL, using () (parentheses) changes the order of evaluation for logical operators. Expressions within parentheses are evaluated first, ensuring the intended logic is applied.</em></p>
</section>
<section id="data-types" class="level3">
<h3 class="anchored" data-anchor-id="data-types">Data types:</h3>
<ul>
<li><p>How we convert values from one type to another. In standard SQL, type conversion can be done using the <code>CAST</code> function: <code>CAST(&lt;column&gt; AS &lt;data_type&gt;)</code>. In Postgres, we can also use the double-colon syntax as a shorthand for the above <code>CAST</code> function: <code>&lt;column&gt;::&lt;data_type&gt;</code>.</p></li>
<li><p><strong>Boolean</strong>, <code>BOOLEAN</code> or <code>BOOL</code></p>
<ul>
<li>True: <code>TRUE</code>, <code>t</code>, <code>true</code>, <code>y</code>, <code>yes</code>, <code>YES</code>, <code>Y</code>, <code>T</code>, <code>1(or any other positive integer)</code></li>
<li>False: <code>FALSE</code>, <code>0</code>, <code>NO</code>, <code>N</code>, <code>F</code></li>
</ul></li>
<li><p><strong>Characters</strong></p>
<ul>
<li><code>CHAR(n)</code>: a string of exactly <code>n</code> characters padded with spaces.</li>
<li><code>VARCHAR(n)</code>: a variable set of <code>n</code> characters.</li>
<li><code>TEXT</code>: Postgres specific type for which there is practically no limit on the number of characters.</li>
</ul></li>
<li><p><strong>DateTime</strong>: date and time</p>
<ul>
<li><code>DATE</code>: date (YYYY-MM-DD)
<ul>
<li><code>CURRENT_DATE</code>: current date</li>
</ul></li>
<li><code>TIME</code>: time</li>
<li><code>TIMESTAMP</code>: date and time</li>
<li><code>TIMESTAMPTZ</code>: date and time with timezone</li>
</ul></li>
<li><p><strong>Binary</strong>: binary data</p></li>
<li><p><strong>Numbers</strong>:</p></li>
<li><p>Integers</p></li>
</ul>
<table class="table">
<colgroup>
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 28%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th>Name</th>
<th>Storage Size</th>
<th>Description</th>
<th>Range</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>smallint</code></td>
<td>2 bytes</td>
<td>small-range integer</td>
<td>-32,768 to +32,767</td>
</tr>
<tr class="even">
<td><code>integer</code></td>
<td>4 bytes</td>
<td>typical choice for integer</td>
<td>-2,147,483,648 to +2,147,483,647</td>
</tr>
<tr class="odd">
<td><code>bigint</code></td>
<td>8 bytes</td>
<td>large-range integer</td>
<td>-9,223,372,036,854,775,808 to +9,223,372,036,854,775,807</td>
</tr>
<tr class="even">
<td><code>serial</code></td>
<td>4 bytes</td>
<td>auto-incrementing integer</td>
<td>1 to 2,147,483,647</td>
</tr>
<tr class="odd">
<td><code>bigserial</code></td>
<td>8 bytes</td>
<td>large auto-incrementing integer</td>
<td>1 to 9,223,372,036,854,775,807</td>
</tr>
</tbody>
</table>
<ul>
<li>Floating-point numbers</li>
</ul>
<table class="table">
<colgroup>
<col style="width: 16%">
<col style="width: 10%">
<col style="width: 24%">
<col style="width: 48%">
</colgroup>
<thead>
<tr class="header">
<th>Name</th>
<th>Storage Size</th>
<th>Description</th>
<th>Range</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>real</code></td>
<td>4 bytes</td>
<td>variable-precision, inexact</td>
<td>at least 6 decimal digits (implementation dependent)</td>
</tr>
<tr class="even">
<td><code>double precision</code></td>
<td>8 bytes</td>
<td>variable-precision, inexact</td>
<td>at least 15 decimal digits (implementation dependent)</td>
</tr>
</tbody>
</table>
<ul>
<li>Arbitrary precision numbers</li>
</ul>
<table class="table">
<colgroup>
<col style="width: 17%">
<col style="width: 9%">
<col style="width: 24%">
<col style="width: 48%">
</colgroup>
<thead>
<tr class="header">
<th>Name</th>
<th>Storage Size</th>
<th>Description</th>
<th>Range</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>numeric</code> or <code>decimal</code></td>
<td>variable</td>
<td>user-specified precision, exact</td>
<td>131072 digits before and 16383 digits after the decimal point</td>
</tr>
</tbody>
</table>
<p><em>Note:With the numeric data type, we can specify the total number of significant digits to store (known as precision) as well as the number of digits in the fractional part (known as scale) by specifying NUMERIC(precision, scale):SELECT CAST(‘183.123456789’ AS NUMERIC(5, 2)); 183.12</em></p>
<ul>
<li><strong>Date/time</strong>:
<ul>
<li><code>DATE</code>: dates (YYYY-MM-DD)</li>
<li><code>TIME</code>: the time of day</li>
<li><code>TIMESTAMP</code>: date + time</li>
<li><code>TIMESTAMPTZ</code>: date + time + timezone</li>
<li><code>Intervals</code>: storing intervals of time <code>'3 years 2 months 23 hours 8 minutes 18s'::INTERVAL</code> 1155 days, 23:08:18</li>
</ul></li>
</ul>
<p><em><code>NOW()</code> and <code>CURRENT_TIMESTAMP</code> are equivalent, with the latter being SQL-standard.</em></p>
<p><em>When you use the <code>NOW()</code> function in SQL, the timezone of the timestamp it returns depends on the timezone setting of the database server, not your local computer.</em></p>
</section>
<section id="nulls" class="level3">
<h3 class="anchored" data-anchor-id="nulls"><strong>Nulls</strong></h3>
<p>A null is marker to indicate that the value for a column is unknown, or not entered yet.A null is not equal to 0, or an empty string. In fact, a null is not even equal to another null!</p>
<p>How different environments show nulls:</p>
<ul>
<li>ipython-sql -&gt; None</li>
<li>psql -&gt; blank space</li>
<li>pgAdmin -&gt; [null]</li>
</ul>
</section>
<section id="where" class="level3">
<h3 class="anchored" data-anchor-id="where"><strong>WHERE</strong></h3>
<table class="table">
<colgroup>
<col style="width: 42%">
<col style="width: 57%">
</colgroup>
<thead>
<tr class="header">
<th>Condition Example</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>WHERE column = value</code></td>
<td>Equals; returns true if the column equals the value.</td>
</tr>
<tr class="even">
<td><code>WHERE column &lt;&gt; value</code></td>
<td>Not equals; true if the column is not equal to value.</td>
</tr>
<tr class="odd">
<td><code>WHERE column &gt; value</code></td>
<td>Greater than; true if the column is more than value.</td>
</tr>
<tr class="even">
<td><code>WHERE column &lt; value</code></td>
<td>Less than; true if the column is less than value.</td>
</tr>
<tr class="odd">
<td><code>WHERE column BETWEEN value1 AND value2</code></td>
<td>True if the column is within the range of value1 and value2.</td>
</tr>
<tr class="even">
<td><code>WHERE column [NOT] IN (value1, value2, ...)</code></td>
<td>True if the column is [NOT] equal to any of multiple values.</td>
</tr>
<tr class="odd">
<td><code>WHERE column [NOT] LIKE pattern</code></td>
<td>True if the column [NOT] matches the SQL pattern.</td>
</tr>
<tr class="even">
<td><code>WHERE column IS [NOT] NULL</code></td>
<td>True if the column is [NOT] NULL.</td>
</tr>
</tbody>
</table>
<p><em>Note that in SQL, strings are enclosed in single quotes, i.e.&nbsp;‘string’.</em></p>
<p><em>While SQL syntax is case-insensitive, string comparisons in SQL can be case-sensitive depending on the database system and collation settings. For example, in some systems, ‘Lost highway’ will not return any rows if the actual data is ‘Lost Highway’.</em></p>
</section>
<section id="like-and-ilike" class="level3">
<h3 class="anchored" data-anchor-id="like-and-ilike"><strong>LIKE</strong> and <strong>ILIKE</strong></h3>
<p>Postgres provides us with two wild-cards that we can use with LIKE: - <code>%</code> matches any string of characters. - <code>_</code> matches a single character.</p>
<ul>
<li>Pattern matching with <code>LIKE</code> is <code>case sensitive</code>;</li>
<li>Postgres also provides the <code>ILIKE</code> keyword that has the same functionality as LIKE but is <code>case-insensitive</code>.</li>
<li>With LIKE or ILIKE, the entire string should match the pattern.</li>
<li>Using <code>ESCAPE</code> to identify escape character: e.g.&nbsp;<code>WHERE column LIKE '%$%%' ESCAPE '$'</code>: matches strings that contains <code>%</code>.</li>
</ul>
</section>
<section id="in" class="level3">
<h3 class="anchored" data-anchor-id="in"><strong>IN</strong></h3>
<div class="sourceCode" id="cb1"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> column1, column2</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> table1</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> column1 <span class="op">=</span> value1 <span class="kw">OR</span> column1 <span class="op">=</span> value2 <span class="kw">OR</span> column1 <span class="op">=</span> value3</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This can be rewritten more succinctly using the <code>IN</code> operator:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> column1, column2</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> table1</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> column1 <span class="kw">IN</span> (value1, value2, value3)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>:</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="between" class="level3">
<h3 class="anchored" data-anchor-id="between"><strong>BETWEEN</strong></h3>
<p>Select a range of values, and it can be used for number(<code>BETWEEN 1 AND 5</code>), character(<code>BETWEEN 'e' AND 'm'</code>) and datetime(<code>BETWEEN DATE '2021-01-01' AND '2021-11-10'</code>).</p>
<p><em><code>BETWEEN</code> is <code>inclusive</code> of both ends of the interval.</em></p>
</section>
<section id="is-null" class="level3">
<h3 class="anchored" data-anchor-id="is-null"><strong>IS NULL</strong></h3>
<p>Trying to find <code>NULL</code> values using <code>WHERE column = NULL</code> fails. This is because a <code>NULL</code> value is by defination not known and could be anything, so it’s not necessarily equal to another <code>NULL</code>. To find <code>NULL</code> values in a column, we can use <code>IS [NOT] NULL</code>.</p>
</section>
<section id="column-aliases-with-as" class="level3">
<h3 class="anchored" data-anchor-id="column-aliases-with-as"><strong>Column Aliases with AS</strong></h3>
<p>In SQL, we are not required to use the same column and table names in the schema.</p>
</section>
<section id="derived-columns" class="level3">
<h3 class="anchored" data-anchor-id="derived-columns"><strong>Derived columns</strong></h3>
<p>Derived columns in SQL are columns taht are the result of doing operations on existing columns of a table.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> title, runtime<span class="op">/</span><span class="fl">60.</span> <span class="kw">AS</span> runtime_hours</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> movies;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><em>if you divide by <code>60</code> instead, SQL assumes that the result of this operation should also be an integer(given that the column <code>runtime</code> is also of type integer), and will return truncated integer values instead of floats.</em></p>
<p><em>SQL doesn’t know what to call the derived column, and by default you will see <code>?column?</code> as the column name. We can use an alias to name the new derived column.</em></p>
<p><em><code>SELECT</code> statement is powerful, but not dangerous. Derived columns returned by Postgres are not saved anywhere, nor do they change existing columns.</em></p>
</section>
<section id="conditionals-with-case" class="level3">
<h3 class="anchored" data-anchor-id="conditionals-with-case"><strong>Conditionals with <code>CASE</code></strong></h3>
<p>It enables us to treat a column differently based on the values in each row.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> </span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  title, </span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  runtime,</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">CASE</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">WHEN</span> runtime <span class="op">&gt;</span> <span class="dv">90</span> <span class="cf">THEN</span> <span class="st">'long'</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">WHEN</span> runtime <span class="kw">BETWEEN</span> <span class="dv">30</span> <span class="kw">AND</span> <span class="dv">90</span> <span class="cf">THEN</span> <span class="st">'normal'</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">ELSE</span> <span class="st">'short'</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>  <span class="cf">END</span> <span class="kw">AS</span> duration</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> </span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>  movies</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="functions-operators" class="level3">
<h3 class="anchored" data-anchor-id="functions-operators"><strong>Functions &amp; operators</strong></h3>
<table class="table">
<thead>
<tr class="header">
<th>Operator</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>+</td>
<td>addition</td>
</tr>
<tr class="even">
<td>-</td>
<td>subtraction</td>
</tr>
<tr class="odd">
<td>*</td>
<td>multiplication</td>
</tr>
<tr class="even">
<td>/</td>
<td>division</td>
</tr>
<tr class="odd">
<td>%</td>
<td>modulo (remainder)</td>
</tr>
<tr class="even">
<td>^</td>
<td>exponentiation</td>
</tr>
<tr class="odd">
<td>@</td>
<td>absolute value</td>
</tr>
</tbody>
</table>
<table class="table">
<thead>
<tr class="header">
<th>Description</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>absolute value</td>
<td><code>abs(-17.4)</code></td>
</tr>
<tr class="even">
<td>smallest integer not less than argument</td>
<td><code>ceil(-42.8)</code></td>
</tr>
<tr class="odd">
<td>exponential</td>
<td><code>exp(1.0)</code></td>
</tr>
<tr class="even">
<td>largest integer not greater than argument</td>
<td><code>floor(-42.8)</code></td>
</tr>
<tr class="odd">
<td>natural logarithm</td>
<td><code>ln(2.0)</code></td>
</tr>
<tr class="even">
<td>logarithm to base b</td>
<td><code>log(2.0, 64.0)</code></td>
</tr>
<tr class="odd">
<td>“π” constant</td>
<td><code>pi()</code></td>
</tr>
<tr class="even">
<td>a raised to the power of b</td>
<td><code>power(9.0, 3.0)</code></td>
</tr>
<tr class="odd">
<td>round to s decimal places</td>
<td><code>round(42.4382, 2)</code></td>
</tr>
<tr class="even">
<td>square root</td>
<td><code>sqrt(2.0)</code></td>
</tr>
</tbody>
</table>
<p><em><code>ROUND()</code> function only works with the <code>NUMERIC</code> (or equivalently <code>DECIMAL</code>) data type.</em></p>
<table class="table">
<colgroup>
<col style="width: 50%">
<col style="width: 49%">
</colgroup>
<thead>
<tr class="header">
<th>Function</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>string || string</code></td>
<td>String concatenation</td>
</tr>
<tr class="even">
<td><code>string || non-string</code> or <code>non-string || string</code></td>
<td>String concatenation with one non-string input</td>
</tr>
<tr class="odd">
<td><code>char_length(string)</code> or <code>character_length(string)</code></td>
<td>Number of characters in string</td>
</tr>
<tr class="even">
<td><code>lower(string)</code></td>
<td>Convert string to lower case</td>
</tr>
<tr class="odd">
<td><code>position(substring in string)</code></td>
<td>Location of specified substring</td>
</tr>
<tr class="even">
<td><code>substring(string)</code></td>
<td>Extract substring</td>
</tr>
<tr class="odd">
<td><code>upper(string)</code></td>
<td>Convert string to upper case</td>
</tr>
<tr class="even">
<td><code>length(string)</code></td>
<td>Number of characters in string</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb5"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">UPPER</span>(title),</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  SUBSTRING(title <span class="kw">FROM</span> <span class="dv">1</span> <span class="cf">FOR</span> <span class="dv">3</span>) <span class="kw">AS</span> <span class="ot">"First 3 characters"</span>,</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  SUBSTRING(title, <span class="fu">LENGTH</span>(title) <span class="op">-</span> <span class="dv">3</span>, <span class="dv">3</span>) <span class="kw">AS</span> <span class="ot">"LAST 3 characters"</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>  movies</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="nulls-1" class="level3">
<h3 class="anchored" data-anchor-id="nulls-1"><strong>Nulls</strong></h3>
<p><code>NULLIF(value1, value2)</code> returns null if <code>value1</code> and <code>value2</code> are equal. This is helpful for replacing known values with nulls, or prevent, for example, division by zero.</p>


</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>